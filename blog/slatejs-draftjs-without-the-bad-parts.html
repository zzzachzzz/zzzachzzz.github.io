<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Slate.js: Draft.js without the Bad Parts</title><meta name="next-head-count" content="3"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/069ff64b07ed1af4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/069ff64b07ed1af4.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-eae37baa130ab03a.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-9d34f203832e9748.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0f31e0da3388de53.js" defer=""></script><script src="/_next/static/chunks/792-95b7cdfb484c5ddc.js" defer=""></script><script src="/_next/static/chunks/619-3b017027e2c3e013.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-bfb7673b948eb492.js" defer=""></script><script src="/_next/static/FJIgN4qsgAMf5XiU3PhXP/_buildManifest.js" defer=""></script><script src="/_next/static/FJIgN4qsgAMf5XiU3PhXP/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">html{font-size:16px;min-height:100vh;}/*!sc*/
html,body{height:100%;margin:0;padding:0;}/*!sc*/
@media only screen and (max-device-width:480px){html{font-size:14px;}}/*!sc*/
body{background-color:#3e4d4f;color:white;font-family: -apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}/*!sc*/
*{box-sizing:border-box;}/*!sc*/
h1,h2,h3,h4,h5,h6{font-weight:400;}/*!sc*/
code,code[class*="language-"]{font-family: 'Inconsolata',Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;}/*!sc*/
data-styled.g1[id="sc-global-bLrfTZ1"]{content:"sc-global-bLrfTZ1,"}/*!sc*/
.oXjRv{background-color:#272822;padding:0.2em 0.4em;font-size:0.8em;border-radius:0.3em;color:#ae81ff;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
data-styled.g2[id="A__A_-sc-14fqd0c-0"]{content:"oXjRv,"}/*!sc*/
.hxcnSJ{height:1.534rem;width:1.534rem;padding:0.2em;margin-left:5px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
.hxcnSJ:hover > svg{stroke:#ae81ff;}/*!sc*/
data-styled.g3[id="RssLink___RssLink-sc-lk2wz-0"]{content:"hxcnSJ,"}/*!sc*/
.cbPkmK{height:100%;}/*!sc*/
data-styled.g4[id="RssLink___StyledSvg-sc-lk2wz-1"]{content:"cbPkmK,"}/*!sc*/
.lgEcag{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;font-size:1.2rem;margin:5px;}/*!sc*/
data-styled.g5[id="Navigation__Container-sc-10fffhi-0"]{content:"lgEcag,"}/*!sc*/
.bISkVn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-text-decoration:none;text-decoration:none;gap:5px;}/*!sc*/
data-styled.g6[id="Navigation__Nav-sc-10fffhi-1"]{content:"bISkVn,"}/*!sc*/
.ECCqO{color:white;font-weight:500;line-height:1;}/*!sc*/
data-styled.g7[id="Navigation___StyledSpan-sc-10fffhi-2"]{content:"ECCqO,"}/*!sc*/
.fRlBcp{background-color:#272822;padding:0.2em 0.4em;font-size:0.8em;border-radius:0.3em;}/*!sc*/
data-styled.g8[id="Code-sc-1amjnp4-0"]{content:"fRlBcp,"}/*!sc*/
.cTrNrc{margin-left:auto !important;margin-right:auto !important;}/*!sc*/
data-styled.g9[id="TreeToJSX__Pre-sc-1taxolb-0"]{content:"cTrNrc,"}/*!sc*/
.gacNJW > p{margin:0;}/*!sc*/
data-styled.g11[id="TreeToJSX__Li-sc-1taxolb-2"]{content:"gacNJW,"}/*!sc*/
.gjkXwZ{font-size:1.2em;line-height:1.4em;-webkit-letter-spacing:0.01em;-moz-letter-spacing:0.01em;-ms-letter-spacing:0.01em;letter-spacing:0.01em;overflow-wrap:break-word;padding:1.1em;margin:0 auto;}/*!sc*/
.gjkXwZ > *:not(pre){max-width:850px;margin-left:auto;margin-right:auto;}/*!sc*/
.gjkXwZ > pre{width:90vw;max-width:1100px;}/*!sc*/
data-styled.g14[id="BlogContent__Container-sc-10yyr2o-0"]{content:"gjkXwZ,"}/*!sc*/
.czPvNY{text-align:center;margin:2em;margin-bottom:0.2em;}/*!sc*/
data-styled.g15[id="slug___StyledH-sc-8mhdoa-0"]{content:"czPvNY,"}/*!sc*/
.eAxGCo{font-size:0.9em;text-align:center;}/*!sc*/
data-styled.g16[id="slug___StyledP-sc-8mhdoa-1"]{content:"eAxGCo,"}/*!sc*/
</style><style data-href="https://fonts.googleapis.com/css2?family=Inconsolata&display=swap">@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v32/QldgNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLYxYWI2qfdm7Lpp4U8aRk.woff) format('woff')}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v32/QldgNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLYxYWI2qfdm7Lpp4U8WRL2kXWdycuJDETf.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v32/QldgNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLYxYWI2qfdm7Lpp4U8WRP2kXWdycuJDETf.woff) format('woff');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v32/QldgNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLYxYWI2qfdm7Lpp4U8WR32kXWdycuJDA.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div><div class="Navigation__Container-sc-10fffhi-0 lgEcag"><nav class="Navigation__Nav-sc-10fffhi-1 bISkVn"><a href="/" target="_self" rel="noopener noreferrer" class="A__A_-sc-14fqd0c-0 oXjRv">/</a><span class="Navigation___StyledSpan-sc-10fffhi-2 ECCqO">&gt;</span><a href="/blog" target="_self" rel="noopener noreferrer" class="A__A_-sc-14fqd0c-0 oXjRv">blog</a><span class="Navigation___StyledSpan-sc-10fffhi-2 ECCqO">&gt;</span><a href="/blog/slatejs-draftjs-without-the-bad-parts" target="_self" rel="noopener noreferrer" class="A__A_-sc-14fqd0c-0 oXjRv">slatejs-draftjs-without-the-bad-parts</a></nav><a href="/blog/rss.xml" target="_blank" rel="noopener noreferrer" title="RSS Feed" class="A__A_-sc-14fqd0c-0 oXjRv RssLink___RssLink-sc-lk2wz-0 hxcnSJ"><svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round" class="RssLink___StyledSvg-sc-lk2wz-1 cbPkmK"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="5" cy="19" r="1"></circle><path d="M4 4a16 16 0 0 1 16 16"></path><path d="M4 11a9 9 0 0 1 9 9"></path></svg></a></div><main><header><h1 class="slug___StyledH-sc-8mhdoa-0 czPvNY">Slate.js: Draft.js without the Bad Parts</h1><p class="slug___StyledP-sc-8mhdoa-1 eAxGCo"><time dateTime="2019-08-28T15:37:27.000Z">August 28, 2019</time></p></header><article><div class="BlogContent__Container-sc-10yyr2o-0 gjkXwZ"><p>Anyone who has used Facebook&#x27;s open source package, <code class="Code-sc-1amjnp4-0 fRlBcp">Draft.js</code> knows that while it&#x27;s a powerful tool for building rich text editors, the API docs are underdeveloped, and can be very difficult to understand. The editor I wrote this blog post in was made by me with <code class="Code-sc-1amjnp4-0 fRlBcp">Slate.js</code>, and before I found that, I was struggling to learn how to make Draft.js do what I wanted it to do. I don&#x27;t have the expertise to go too into detail about comparing Slate and Draft, but a lot of that is covered here in the readme of Slate: <a href="https://github.com/ianstormtaylor/slate#principles" target="_blank" rel="noopener noreferrer" class="A__A_-sc-14fqd0c-0 oXjRv">Slate Principles</a>. Instead I&#x27;ll tell you about my use case: what I wanted to build with Draft, the problems I ran into, and how Slate made the process easier for me.</p><p>Given that this is a programming blog, the most important feature to me is beautiful code snippets with syntax highlighting. Like so:</p><pre class="TreeToJSX__Pre-sc-1taxolb-0 cTrNrc language-javascript" tabindex="0"><code class="language-javascript"><span class="token comment">// A JavaScript comment</span>
<span class="token keyword">const</span> language <span class="token operator">=</span> <span class="token string">'JavaScript'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">This is definitely </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>language<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// This is definitely JavaScript</span></code></pre><p>I had <code class="Code-sc-1amjnp4-0 fRlBcp">Prism.js</code> to handle the syntax highlighting.</p><p>I needed my editor to...</p><ol><li class="TreeToJSX__Li-sc-1taxolb-2 gacNJW"><p>Handle multi-line code blocks</p></li><li class="TreeToJSX__Li-sc-1taxolb-2 gacNJW"><p>Keep all those lines within the tags <code class="Code-sc-1amjnp4-0 fRlBcp">&lt;pre&gt;&lt;code&gt; ... &lt;/code&gt;&lt;/pre&gt;</code> (To comply with how Prism.js works)</p></li><li class="TreeToJSX__Li-sc-1taxolb-2 gacNJW"><p>Have a way to specify the syntax (via adding a css class to a <code class="Code-sc-1amjnp4-0 fRlBcp">&lt;code&gt;</code> tag: <code class="Code-sc-1amjnp4-0 fRlBcp">language-javascript</code>)</p></li></ol><p>Not too many requirements. This seemed very doable in Draft, especially considering that the example on <a href="https://draftjs.org" target="_blank" rel="noopener noreferrer" class="A__A_-sc-14fqd0c-0 oXjRv">draftjs.org</a> features a Code Block styling option. If you click the code block toggle, make it a couple lines long, and inspect the page, you&#x27;ll see that each line has it&#x27;s own <code class="Code-sc-1amjnp4-0 fRlBcp">&lt;pre&gt;</code> tag. Ah, that fails requirement #2 for me, but I&#x27;m sure I can customize mine to behave differently.</p><p>At the end of the day, I did just want a rich text editor, much like the one on Draft.js&#x27; home page, but with my customized code blocks. I found an npm package <code class="Code-sc-1amjnp4-0 fRlBcp">react-rte</code>, which is pretty much a pre-built rich text editor built on Draft.js, with the ability to customize <i>certain</i> things further (with this package, Draft was being abstracted away, and I could only customize parts that the creators of react-rte designated). Out of the box, react-rte did have multi-line code blocks contained in a single <code class="Code-sc-1amjnp4-0 fRlBcp">&lt;pre&gt;</code> tag, and the ability to insert a soft line-break to stay inside a code block with Shift + Enter. Not bad, until you try to <i><b>paste</b></i> a bunch of code in... which is the main way I would be inserting code into blog posts, pasting it from my real editor.</p><p>So how do you solve this problem?</p><p>What would be needed is a special condition for code blocks. If the content block is a code block, insert another code line, without exiting that parent code block. <i>I&#x27;m sure this type of behavior would have been possible in Draft.js,</i> but the trouble was figuring out <i>how</i>.</p><p>This is the main difference between Draft and Slate: Slate gives you tons of examples <i>with</i> those examples being demonstrated on Slate&#x27;s website, an excellent getting started walkthrough, and an API that actually makes sense.</p><p>Because of these offerings, my experience with Slate went something like this...</p><ol><li class="TreeToJSX__Li-sc-1taxolb-2 gacNJW"><p>Read the Walkthrough (a very pleasant experience might I add)</p></li><li class="TreeToJSX__Li-sc-1taxolb-2 gacNJW"><p>Refer to examples... <i>&quot;Oh look, &#x27;Rich Text&#x27; and &#x27;Code Highlighting&#x27; are exactly what I want, I&#x27;ll just look at the source code for these and combine them into my own!&quot;</i></p></li><li class="TreeToJSX__Li-sc-1taxolb-2 gacNJW"><p>Complete customization of my editor, referring to Slate&#x27;s API docs</p></li></ol><p>And there are many more examples I&#x27;ll be pulling from. At the time of writing this post, my editor doesn&#x27;t have support for images, but there&#x27;s an example on Slate&#x27;s site I&#x27;ll be referring to.</p><p>Happy custom editor building ~</p></div></article></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Slate.js: Draft.js without the Bad Parts","date":"2019-08-28T15:37:27.000Z","content":"\nAnyone who has used Facebook's open source package, `Draft.js` knows that while it's a powerful tool for building rich text editors, the API docs are underdeveloped, and can be very difficult to understand. The editor I wrote this blog post in was made by me with `Slate.js`, and before I found that, I was struggling to learn how to make Draft.js do what I wanted it to do. I don't have the expertise to go too into detail about comparing Slate and Draft, but a lot of that is covered here in the readme of Slate: [Slate Principles](https://github.com/ianstormtaylor/slate#principles). Instead I'll tell you about my use case: what I wanted to build with Draft, the problems I ran into, and how Slate made the process easier for me.\n\nGiven that this is a programming blog, the most important feature to me is beautiful code snippets with syntax highlighting. Like so:\n\n```javascript\n// A JavaScript comment\nconst language = 'JavaScript';\nconsole.log(`This is definitely ${language}`);  // This is definitely JavaScript\n```\n\nI had `Prism.js` to handle the syntax highlighting.\n\nI needed my editor to...\n\n1.  Handle multi-line code blocks\n2.  Keep all those lines within the tags `\u003cpre\u003e\u003ccode\u003e ... \u003c/code\u003e\u003c/pre\u003e` (To comply with how Prism.js works)\n3.  Have a way to specify the syntax (via adding a css class to a `\u003ccode\u003e` tag: `language-javascript`)\n\nNot too many requirements. This seemed very doable in Draft, especially considering that the example on [draftjs.org](https://draftjs.org) features a Code Block styling option. If you click the code block toggle, make it a couple lines long, and inspect the page, you'll see that each line has it's own `\u003cpre\u003e` tag. Ah, that fails requirement #2 for me, but I'm sure I can customize mine to behave differently.\n\nAt the end of the day, I did just want a rich text editor, much like the one on Draft.js' home page, but with my customized code blocks. I found an npm package `react-rte`, which is pretty much a pre-built rich text editor built on Draft.js, with the ability to customize _certain_ things further (with this package, Draft was being abstracted away, and I could only customize parts that the creators of react-rte designated). Out of the box, react-rte did have multi-line code blocks contained in a single `\u003cpre\u003e` tag, and the ability to insert a soft line-break to stay inside a code block with Shift + Enter. Not bad, until you try to _**paste**_ a bunch of code in... which is the main way I would be inserting code into blog posts, pasting it from my real editor.\n\nSo how do you solve this problem?\n\nWhat would be needed is a special condition for code blocks. If the content block is a code block, insert another code line, without exiting that parent code block. _I'm sure this type of behavior would have been possible in Draft.js,_ but the trouble was figuring out _how_.\n\nThis is the main difference between Draft and Slate: Slate gives you tons of examples _with_ those examples being demonstrated on Slate's website, an excellent getting started walkthrough, and an API that actually makes sense.\n\nBecause of these offerings, my experience with Slate went something like this...\n\n1.  Read the Walkthrough (a very pleasant experience might I add)\n2.  Refer to examples... _\"Oh look, 'Rich Text' and 'Code Highlighting' are exactly what I want, I'll just look at the source code for these and combine them into my own!\"_\n3.  Complete customization of my editor, referring to Slate's API docs\n\nAnd there are many more examples I'll be pulling from. At the time of writing this post, my editor doesn't have support for images, but there's an example on Slate's site I'll be referring to.\n\nHappy custom editor building ~\n","slug":"slatejs-draftjs-without-the-bad-parts"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"slatejs-draftjs-without-the-bad-parts"},"buildId":"FJIgN4qsgAMf5XiU3PhXP","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>
<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Understanding Promises in JavaScript</title><meta name="next-head-count" content="3"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin /><link rel="preload" href="/_next/static/css/069ff64b07ed1af4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/069ff64b07ed1af4.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-eae37baa130ab03a.js" defer=""></script><script src="/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/_next/static/chunks/main-9d21f2f92d74d34f.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0f31e0da3388de53.js" defer=""></script><script src="/_next/static/chunks/792-95b7cdfb484c5ddc.js" defer=""></script><script src="/_next/static/chunks/519-ffc700f401ff0ed5.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-f09ac09cea7069b8.js" defer=""></script><script src="/_next/static/9R7c8DjzDZqMwZqu4ofo-/_buildManifest.js" defer=""></script><script src="/_next/static/9R7c8DjzDZqMwZqu4ofo-/_ssgManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.5">html{font-size:16px;min-height:100vh;}/*!sc*/
html,body{height:100%;margin:0;padding:0;}/*!sc*/
@media only screen and (max-device-width:480px){html{font-size:14px;}}/*!sc*/
body{background-color:#3e4d4f;color:white;font-family: -apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}/*!sc*/
*{box-sizing:border-box;}/*!sc*/
h1,h2,h3,h4,h5,h6{font-weight:400;}/*!sc*/
code,code[class*="language-"]{font-family: 'Inconsolata',Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;}/*!sc*/
data-styled.g1[id="sc-global-bLrfTZ1"]{content:"sc-global-bLrfTZ1,"}/*!sc*/
.oXjRv{background-color:#272822;padding:0.2em 0.4em;font-size:0.8em;border-radius:0.3em;color:#ae81ff;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
data-styled.g2[id="A__A_-sc-14fqd0c-0"]{content:"oXjRv,"}/*!sc*/
.hxcnSJ{height:1.534rem;width:1.534rem;padding:0.2em;margin-left:5px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}/*!sc*/
.hxcnSJ:hover > svg{stroke:#ae81ff;}/*!sc*/
data-styled.g3[id="RssLink___RssLink-sc-lk2wz-0"]{content:"hxcnSJ,"}/*!sc*/
.cbPkmK{height:100%;}/*!sc*/
data-styled.g4[id="RssLink___StyledSvg-sc-lk2wz-1"]{content:"cbPkmK,"}/*!sc*/
.lgEcag{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;font-size:1.2rem;margin:5px;}/*!sc*/
data-styled.g5[id="Navigation__Container-sc-10fffhi-0"]{content:"lgEcag,"}/*!sc*/
.bISkVn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-text-decoration:none;text-decoration:none;gap:5px;}/*!sc*/
data-styled.g6[id="Navigation__Nav-sc-10fffhi-1"]{content:"bISkVn,"}/*!sc*/
.ECCqO{color:white;font-weight:500;line-height:1;}/*!sc*/
data-styled.g7[id="Navigation___StyledSpan-sc-10fffhi-2"]{content:"ECCqO,"}/*!sc*/
.fRlBcp{background-color:#272822;padding:0.2em 0.4em;font-size:0.8em;border-radius:0.3em;}/*!sc*/
data-styled.g8[id="Code-sc-1amjnp4-0"]{content:"fRlBcp,"}/*!sc*/
.cTrNrc{margin-left:auto !important;margin-right:auto !important;}/*!sc*/
data-styled.g9[id="TreeToJSX__Pre-sc-1taxolb-0"]{content:"cTrNrc,"}/*!sc*/
.bkGieB{color:#aaa;font-style:italic;border-left:2px solid #ddd;margin-left:0;margin-right:0;padding-left:10px;}/*!sc*/
data-styled.g10[id="TreeToJSX__BlockQuote-sc-1taxolb-1"]{content:"bkGieB,"}/*!sc*/
.gacNJW > p{margin:0;}/*!sc*/
data-styled.g11[id="TreeToJSX__Li-sc-1taxolb-2"]{content:"gacNJW,"}/*!sc*/
.gjkXwZ{font-size:1.2em;line-height:1.4em;-webkit-letter-spacing:0.01em;-moz-letter-spacing:0.01em;-ms-letter-spacing:0.01em;letter-spacing:0.01em;overflow-wrap:break-word;padding:1.1em;margin:0 auto;}/*!sc*/
.gjkXwZ > *:not(pre){max-width:850px;margin-left:auto;margin-right:auto;}/*!sc*/
.gjkXwZ > pre{width:90vw;max-width:1100px;}/*!sc*/
data-styled.g13[id="BlogContent__Container-sc-10yyr2o-0"]{content:"gjkXwZ,"}/*!sc*/
.czPvNY{text-align:center;margin:2em;margin-bottom:0.2em;}/*!sc*/
data-styled.g27[id="slug___StyledH-sc-8mhdoa-0"]{content:"czPvNY,"}/*!sc*/
.eAxGCo{font-size:0.9em;text-align:center;}/*!sc*/
data-styled.g28[id="slug___StyledP-sc-8mhdoa-1"]{content:"eAxGCo,"}/*!sc*/
</style><style data-href="https://fonts.googleapis.com/css2?family=Inconsolata&display=swap">@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;font-stretch:normal;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v32/QldgNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLYxYWI2qfdm7Lpp4U8aRk.woff) format('woff')}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v32/QldgNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLYxYWI2qfdm7Lpp4U8WRL2kXWdycuJDETf.woff) format('woff');unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v32/QldgNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLYxYWI2qfdm7Lpp4U8WRP2kXWdycuJDETf.woff) format('woff');unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:'Inconsolata';font-style:normal;font-weight:400;font-stretch:100%;font-display:swap;src:url(https://fonts.gstatic.com/s/inconsolata/v32/QldgNThLqRwH-OJ1UHjlKENVzkWGVkL3GZQmAwLYxYWI2qfdm7Lpp4U8WR32kXWdycuJDA.woff) format('woff');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}</style></head><body><div id="__next"><div><div class="Navigation__Container-sc-10fffhi-0 lgEcag"><nav class="Navigation__Nav-sc-10fffhi-1 bISkVn"><a href="/" target="_self" rel="noopener noreferrer" class="A__A_-sc-14fqd0c-0 oXjRv">/</a><span class="Navigation___StyledSpan-sc-10fffhi-2 ECCqO">&gt;</span><a href="/blog" target="_self" rel="noopener noreferrer" class="A__A_-sc-14fqd0c-0 oXjRv">blog</a><span class="Navigation___StyledSpan-sc-10fffhi-2 ECCqO">&gt;</span><a href="/blog/understanding-promises-in-javascript" target="_self" rel="noopener noreferrer" class="A__A_-sc-14fqd0c-0 oXjRv">understanding-promises-in-javascript</a></nav><a href="/blog/rss.xml" target="_blank" rel="noopener noreferrer" title="RSS Feed" class="A__A_-sc-14fqd0c-0 oXjRv RssLink___RssLink-sc-lk2wz-0 hxcnSJ"><svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ffffff" fill="none" stroke-linecap="round" stroke-linejoin="round" class="RssLink___StyledSvg-sc-lk2wz-1 cbPkmK"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="5" cy="19" r="1"></circle><path d="M4 4a16 16 0 0 1 16 16"></path><path d="M4 11a9 9 0 0 1 9 9"></path></svg></a></div><main><header><h1 class="slug___StyledH-sc-8mhdoa-0 czPvNY">Understanding Promises in JavaScript</h1><p class="slug___StyledP-sc-8mhdoa-1 eAxGCo"><time dateTime="2019-08-29T20:35:44.000Z">August 29, 2019</time></p></header><article><div class="BlogContent__Container-sc-10yyr2o-0 gjkXwZ"><p>Promises are really confusing. There&#x27;s a lot of keywords associated with promises and async JS:</p><ul><li class="TreeToJSX__Li-sc-1taxolb-2 gacNJW"><p>Promise</p></li><li class="TreeToJSX__Li-sc-1taxolb-2 gacNJW"><p>resolve</p></li><li class="TreeToJSX__Li-sc-1taxolb-2 gacNJW"><p>reject</p></li><li class="TreeToJSX__Li-sc-1taxolb-2 gacNJW"><p>then</p></li><li class="TreeToJSX__Li-sc-1taxolb-2 gacNJW"><p>catch</p></li><li class="TreeToJSX__Li-sc-1taxolb-2 gacNJW"><p>async</p></li><li class="TreeToJSX__Li-sc-1taxolb-2 gacNJW"><p>await</p></li></ul><p>From MDN:</p><pre class="TreeToJSX__Pre-sc-1taxolb-0 cTrNrc language-javascript" tabindex="0"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>executor<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><code class="Code-sc-1amjnp4-0 fRlBcp">executor</code></p><blockquote class="TreeToJSX__BlockQuote-sc-1taxolb-1 bkGieB"><p>A function that is passed with the arguments resolve and reject. The executor function is executed immediately by the Promise implementation, passing resolve and reject functions...</p></blockquote><p>So if we break this down further, the expected arguments look like this:</p><pre class="TreeToJSX__Pre-sc-1taxolb-0 cTrNrc language-javascript" tabindex="0"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">executor</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>We define the <code class="Code-sc-1amjnp4-0 fRlBcp">executor</code> function, which receives <code class="Code-sc-1amjnp4-0 fRlBcp">resolve</code> and <code class="Code-sc-1amjnp4-0 fRlBcp">reject</code> callback functions as arguments.</p><pre class="TreeToJSX__Pre-sc-1taxolb-0 cTrNrc language-javascript" tabindex="0"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">executor</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// Success</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Resolved the promise'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>  <span class="token comment">// Error</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'Rejected the promise'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>The <code class="Code-sc-1amjnp4-0 fRlBcp">executor</code> function doesn&#x27;t have to be named, I&#x27;m just making my example explicit.</p><p>Once the promise has been resolved or rejected, that will trigger either a chained <code class="Code-sc-1amjnp4-0 fRlBcp">then</code> or <code class="Code-sc-1amjnp4-0 fRlBcp">catch</code> to be called.</p><pre class="TreeToJSX__Pre-sc-1taxolb-0 cTrNrc language-javascript" tabindex="0"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// Success</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Resolved'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>  <span class="token comment">// Error</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'Rejected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 'Resolved'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 'Rejected'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>An alternative syntax (that I think is more confusing), is to pass a second argument to <code class="Code-sc-1amjnp4-0 fRlBcp">then</code>, which will handle <code class="Code-sc-1amjnp4-0 fRlBcp">reject</code> in place of <code class="Code-sc-1amjnp4-0 fRlBcp">catch</code>. I would not recommend this but it&#x27;s good to know.</p><pre class="TreeToJSX__Pre-sc-1taxolb-0 cTrNrc language-javascript" tabindex="0"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">executor</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// Success</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Resolved'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>  <span class="token comment">// Error</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'Rejected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 'Resolved'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 'Rejected'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Now that we understand the general behavior of Promises, let&#x27;s break down this example <code class="Code-sc-1amjnp4-0 fRlBcp">sleep</code> function.</p><pre class="TreeToJSX__Pre-sc-1taxolb-0 cTrNrc language-javascript" tabindex="0"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token parameter">ms</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Resolved Value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> ms<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Before sleep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> resolvedValue <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 5 seconds</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'After sleep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resolvedValue<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 'Resolved Value'</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Normally if we were to call <code class="Code-sc-1amjnp4-0 fRlBcp">sleep</code> without <code class="Code-sc-1amjnp4-0 fRlBcp">await</code>, there would be no 5 second pause between the two log statements. That&#x27;s because our <code class="Code-sc-1amjnp4-0 fRlBcp">sleep</code> function returns a promise, so we must wait for it to be resolved if we want our <code class="Code-sc-1amjnp4-0 fRlBcp">main</code> function to be executed synchronously.</p><p>In order to use the <code class="Code-sc-1amjnp4-0 fRlBcp">await</code> keyword, the surrounding function, <code class="Code-sc-1amjnp4-0 fRlBcp">main</code>, must be given the <code class="Code-sc-1amjnp4-0 fRlBcp">async</code> keyword.</p><p><code class="Code-sc-1amjnp4-0 fRlBcp">setTimeout</code> is an asynchronous function, one of few in JS&#x27;s built in library. However, <code class="Code-sc-1amjnp4-0 fRlBcp">setTimeout</code>_ is not a Promise-based asynchronous function, it is callback-based_. In order to <code class="Code-sc-1amjnp4-0 fRlBcp">await</code> for <code class="Code-sc-1amjnp4-0 fRlBcp">setTimeout</code> to complete, we must wrap it in a promise, and <code class="Code-sc-1amjnp4-0 fRlBcp">resolve</code> that promise inside the callback function we provide to <code class="Code-sc-1amjnp4-0 fRlBcp">setTimeout</code>.</p><p>Here&#x27;s a shorthand version of the above using arrow functions.</p><pre class="TreeToJSX__Pre-sc-1taxolb-0 cTrNrc language-javascript" tabindex="0"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">sleep</span> <span class="token operator">=</span> <span class="token parameter">ms</span> <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=></span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Resolved Value'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ms<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Before sleep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> resolvedValue <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 5 seconds</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'After sleep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resolvedValue<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 'Resolved Value'</span>
<span class="token punctuation">}</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Promises are confusing. If you don&#x27;t understand them fully, don&#x27;t worry about it. Check out other resources, and most importantly, play around with the code yourself.</p></div></article></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Understanding Promises in JavaScript","date":"2019-08-29T20:35:44.000Z","content":"\nPromises are really confusing. There's a lot of keywords associated with promises and async JS:\n\n-   Promise\n-   resolve\n-   reject\n-   then\n-   catch\n-   async\n-   await\n\nFrom MDN:\n\n```javascript\nnew Promise(executor);\n```\n\n`executor`\n\n\u003e A function that is passed with the arguments resolve and reject. The executor function is executed immediately by the Promise implementation, passing resolve and reject functions...\n\nSo if we break this down further, the expected arguments look like this:\n\n```javascript\nnew Promise(function executor(resolve, reject));\n```\n\nWe define the `executor` function, which receives `resolve` and `reject` callback functions as arguments.\n\n```javascript\nnew Promise(function executor(resolve, reject) {\n  if (true) {  // Success\n    resolve('Resolved the promise');\n  } else {  // Error\n    reject('Rejected the promise');\n  }\n});\n```\n\nThe `executor` function doesn't have to be named, I'm just making my example explicit.\n\nOnce the promise has been resolved or rejected, that will trigger either a chained `then` or `catch` to be called.\n\n```javascript\nnew Promise(function(resolve, reject) {\n  if (true) {  // Success\n    resolve('Resolved');\n  } else {  // Error\n    reject('Rejected');\n  }\n})\n.then(function(result) {\n  console.log(result);  // 'Resolved'\n})\n.catch(function(error) {\n  console.log(error);  // 'Rejected'\n});\n```\n\nAn alternative syntax (that I think is more confusing), is to pass a second argument to `then`, which will handle `reject` in place of `catch`. I would not recommend this but it's good to know.\n\n```javascript\nnew Promise(function executor(resolve, reject) {\n  if (true) {  // Success\n    resolve('Resolved');\n  } else {  // Error\n    reject('Rejected');\n  }\n})\n.then(function(result) {\n  console.log(result);  // 'Resolved'\n}, function(error) {\n  console.log(error);  // 'Rejected'\n});\n```\n\nNow that we understand the general behavior of Promises, let's break down this example `sleep` function.\n\n```javascript\nfunction sleep(ms) {\n  return new Promise(function(resolve) {\n    setTimeout(function() {\n      resolve('Resolved Value');\n    }, ms);\n  })\n}\n\nasync function main() {\n  console.log('Before sleep');\n  const resolvedValue = await sleep(5000);  // 5 seconds\n  console.log('After sleep');\n  console.log(resolvedValue);  // 'Resolved Value'\n}\n\nmain();\n```\n\nNormally if we were to call `sleep` without `await`, there would be no 5 second pause between the two log statements. That's because our `sleep` function returns a promise, so we must wait for it to be resolved if we want our `main` function to be executed synchronously.\n\nIn order to use the `await` keyword, the surrounding function, `main`, must be given the `async` keyword.\n\n`setTimeout` is an asynchronous function, one of few in JS's built in library. However, `setTimeout`_ is not a Promise-based asynchronous function, it is callback-based_. In order to `await` for `setTimeout` to complete, we must wrap it in a promise, and `resolve` that promise inside the callback function we provide to `setTimeout`.\n\nHere's a shorthand version of the above using arrow functions.\n\n```javascript\nconst sleep = ms =\u003e new Promise(resolve =\u003e setTimeout(() =\u003e resolve('Resolved Value'), ms));\n\nasync function main() {\n  console.log('Before sleep');\n  const resolvedValue = await sleep(5000);  // 5 seconds\n  console.log('After sleep');\n  console.log(resolvedValue);  // 'Resolved Value'\n}\n\nmain();\n```\n\nPromises are confusing. If you don't understand them fully, don't worry about it. Check out other resources, and most importantly, play around with the code yourself.\n","slug":"understanding-promises-in-javascript"}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"understanding-promises-in-javascript"},"buildId":"9R7c8DjzDZqMwZqu4ofo-","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>